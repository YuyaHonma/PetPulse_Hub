<div style="margin-top: -180px;"></div>
<%= image_tag "new_post.jpeg", style: "width: 100%; height: auto;", alt: "ãƒˆãƒƒãƒ—ç”»åƒ" %>

<div class="container mt-4 mb-3">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div style="margin-top: 20px; text-align: center; font-weight:bold;">
        <h1><strong>ğŸ¾ã”ç›¸è«‡ãƒ•ã‚©ãƒ¼ãƒ ğŸ¾</strong></h1>
      </div>
      <% if @post.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>
          <ul>
            <% @post.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>
      <div class="row mt-4"></div>
      <%= form_with(model: @post, url: owner_posts_path, local: true) do |f| %>
        <div class="form-group">
          <%= f.label :title, "ã—ã¤ã‘ã«é–¢ã™ã‚‹ãŠæ‚©ã¿" %>
          <%= f.text_field :title, class: "form-control", placeholder: "ä¾‹: æ•£æ­©ä¸­ã«å¼•ã£å¼µã‚‹å•é¡ŒãŒã‚ã‚Šã¾ã™", required: true %>
        </div>
        <div class="form-group">
          <%= f.label :category_id, "ç›¸è«‡ã—ãŸã„ãŠæ‚©ã¿å†…å®¹" %>
          <%= f.select :category_id, options_for_select(Category.all.map{ |category| [category.name, category.id] }, selected: nil), {}, class: "form-control", required: true %>
        </div>
        <div class="form-group">
          <%= f.label :image, "ãŠæ‚©ã¿ã«é–¢ã™ã‚‹ç”»åƒã‚’æ·»ä»˜" %>
          <%= f.file_field :image, class: "form-control", id: "post_image" %>
          <small id="imagesHelp" class="form-text text-muted">ç”»åƒã‚’ä¸€æšé¸æŠã—ã¦ãã ã•ã„ã€‚</small>
        </div>
        <!-- Add a div to display the selected image URL -->
        <div id="image_url_display"></div>
        <div class="form-group">
          <%= f.label :introduction, "ã”ç›¸è«‡å†…å®¹" %>
          <%= f.text_area :introduction, class: "form-control", placeholder: "ä¾‹: æœ€è¿‘ã€æ•£æ­©ä¸­ã«ä»–ã®çŠ¬ã«èˆˆå‘³ã‚’æŒã£ã¦å¼•ã£å¼µã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã©ã®ã‚ˆã†ã«å¯¾å‡¦ã—ãŸã‚‰ã‚ˆã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ", required: true, rows: 5 %>
        </div>
        <div class="form-group">
          <%= f.label :current_approach, "ä»Šè¡Œã£ã¦ã„ã‚‹å¯¾ç­–" %>
          <%= f.text_area :current_approach, class: "form-control", placeholder: "ä¾‹: ç¾åœ¨ã¯ãƒªãƒ¼ãƒ‰ã‚’å¼•ã£å¼µã£ãŸã‚‰ç«‹ã¡æ­¢ã¾ã‚‹ã‚ˆã†ã«ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ä¸­ã§ã™ã€‚", required: true, rows: 3 %>
        </div>
        <div class="text-center mt-4">
          <% if @post.new_record? %>
            <%= f.submit "æŠ•ç¨¿", class: "btn btn-primary btn-lg px-5 mt-4 mb-4" %>
          <% else %>
            <%= f.submit "æ›´æ–°", class: "btn btn-primary btn-lg px-5 mt-4 mb-4" %>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
  <div class="row mt-4"></div> <!-- ä½™ç™½ã‚’è¿½åŠ  -->
</div>

<!-- JavaScript to display the selected image URL -->
<script>
  document.getElementById('post_image').addEventListener('change', function() {
    var file = this.files[0];
    var image_url_display = document.getElementById('image_url_display');
    image_url_display.innerHTML = '<p>é¸æŠã—ãŸç”»åƒã®URL: ' + URL.createObjectURL(file) + '</p>';
  });
</script>
